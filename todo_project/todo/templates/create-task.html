{% extends "base.html" %}
{% block content %}

<div class="container mt-5 mb-5">
    <h1 class="mb-4">Create Task</h1>
    <div class="card-header">
        {% if task_form.errors %}
        <div class="alert alert-danger">
          <strong>Error:</strong> There are errors in the form.
          <ul>
            {% for field_name, field_errors in task_form.errors.items %}
              <li><strong>{{ field_name|title }}:</strong>
                <ul>
                  {% for error in field_errors %}
                    <li>{{ error }}</li>
                  {% endfor %}
                </ul>
              </li>
            {% endfor %}
          </ul>
        </div>
      {% elif form_submitted %}
        <div class="alert alert-success">
          <strong>Success:</strong> The task has been successfully submitted.
        </div>
      {% endif %}
    </div>
        <div class="card-body">
            <div class="container mt-5">
                <h2>Create Task : </h2>
                <form method="post" class="mt-4" enctype="multipart/form-data">
                  {% csrf_token %}
                  
                  <div class="form-group row">
                    <label for="{{ task_form.title.id_for_label }}" class="col-sm-2 col-form-label">Title:</label>
                    <div class="col-sm-10">
                      {{ task_form.title }}
                      <small id="titleHelp" class="form-text text-muted">Enter a descriptive title for the task.</small>
                    </div>
                  </div>

                  <div class="form-group row">
                    <label for="{{ task_form.deadline.id_for_label }}" class="col-sm-2 col-form-label">Deadline:</label>
                    <div class="col-sm-3">
                        <input type="datetime-local" id="{{ task_form.deadline.id_for_label }}" name="{{ task_form.deadline.name }}" class="form-control">
                        <small id="deadlineHelp" class="form-text text-muted">Enter the deadline for the task.</small>
                    </div>
                  </div>

                  <div class="form-group row">
                    <label for="{{ task_form.completed.id_for_label }}" class="col-sm-2 col-form-label">Completed:</label>
                    <div class="col-sm-10">
                      {{ task_form.file }}
                      <small id="completedHelp" class="form-text text-muted">Check if the task is completed.</small>
                    </div>
                  </div>
                  
                  <div class="form-group row">
                    <label for="{{ task_form.completed.id_for_label }}" class="col-sm-2 col-form-label">Completed:</label>
                    <div class="col-sm-10">
                      {{ task_form.completed }}
                      <small id="completedHelp" class="form-text text-muted">Check if the task is completed.</small>
                    </div>
                  </div>

                  
                  <div class="form-group row">
                    <div class="col-sm-6 offset-sm-2">
                      <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                    <div class="col-sm-6 float-right">
                        <a href="{%url 'all_task_list' %}"><button type="button" class="btn btn-warning"><span class="mr-3"><i class="fa fa-angle-double-left"></i></span>Go To All Tasks</button></a>
                      </div>
                  </div>
                </form>
        </div>
    </div>
</div>

{% endblock %}
